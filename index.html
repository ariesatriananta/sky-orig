<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistem Manajemen Rental</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Login Screen -->
    <div id="loginScreen" class="login-container">
        <div class="login-box">
            <div class="login-header">
                <i class="fas fa-box"></i>
                <h2>Sistem Manajemen Rental</h2>
                <p>Masuk ke akun Anda</p>
            </div>
            <form onsubmit="event.preventDefault(); login();">
                <div class="form-group">
                    <label for="username">Username</label>
                    <input type="text" id="username" value="admin" required>
                </div>
                <div class="form-group">
                    <label for="password">Password</label>
                    <input type="password" id="password" value="admin123" required>
                </div>
                <button type="submit" class="login-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    Masuk
                </button>
            </form>
        </div>
    </div>

    <!-- Main Application -->
    <div id="mainApp" style="display: none;">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-box"></i>
                    <span>Sistem Manajemen Rental</span>
                </div>
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    Keluar
                </button>
            </div>
        </header>

        <!-- Navigation -->
        <nav class="nav">
            <div class="nav-item active" onclick="showSection('dashboard')">
                <i class="fas fa-tachometer-alt"></i>
                Dashboard
            </div>
            <div class="nav-item" onclick="showSection('categories')">
                <i class="fas fa-tags"></i>
                Kategori
            </div>
            <div class="nav-item" onclick="showSection('items')">
                <i class="fas fa-box"></i>
                Barang
            </div>
            <div class="nav-item" onclick="showSection('rentals')">
                <i class="fas fa-handshake"></i>
                Penyewaan
            </div>
            <div class="nav-item" onclick="showSection('returns')">
                <i class="fas fa-undo"></i>
                Pengembalian
            </div>
            <div class="nav-item" onclick="showSection('reports')">
                <i class="fas fa-chart-bar"></i>
                Laporan
            </div>
        </nav>

        <!-- Dashboard Section -->
        <div id="dashboardSection" class="section">
            <div class="section-header">
                <h2>Dashboard</h2>
                <p>Ringkasan aktivitas rental Anda</p>
            </div>
            
            <div class="kpi-grid">
                <div class="kpi-card">
                    <div class="kpi-icon revenue">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                    <div class="kpi-content">
                        <h3 id="totalRevenue">Rp 0</h3>
                        <p>Total Pendapatan</p>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-icon active">
                        <i class="fas fa-handshake"></i>
                    </div>
                    <div class="kpi-content">
                        <h3 id="activeRentals">0</h3>
                        <p>Penyewaan Aktif</p>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-icon available">
                        <i class="fas fa-box"></i>
                    </div>
                    <div class="kpi-content">
                        <h3 id="availableItems">0</h3>
                        <p>Barang Tersedia</p>
                    </div>
                </div>
                
                <div class="kpi-card">
                    <div class="kpi-icon categories">
                        <i class="fas fa-tags"></i>
                    </div>
                    <div class="kpi-content">
                        <h3 id="totalCategories">0</h3>
                        <p>Total Kategori</p>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <div class="dashboard-card">
                    <h3>Statistik Gudang</h3>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <span class="stat-label">Barang di Gudang</span>
                            <span class="stat-value" id="warehouseItems">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Barang Disewa</span>
                            <span class="stat-value" id="rentedItems">0</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-label">Total Keuntungan</span>
                            <span class="stat-value" id="totalProfit">Rp 0</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Categories Section -->
        <div id="categoriesSection" class="section" style="display: none;">
            <div class="section-header">
                <h2>Manajemen Kategori</h2>
                <button class="btn-primary" onclick="showAddCategoryModal()">
                    <i class="fas fa-plus"></i>
                    Tambah Kategori
                </button>
            </div>
            
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Icon</th>
                            <th>Nama Kategori</th>
                            <th>Deskripsi</th>
                            <th>Jumlah Barang</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="categoriesTableBody">
                        <!-- Categories will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Items Section -->
        <div id="itemsSection" class="section" style="display: none;">
            <div class="section-header">
                <h2>Manajemen Barang</h2>
                <button class="btn-primary" onclick="showAddItemModal()">
                    <i class="fas fa-plus"></i>
                    Tambah Barang
                </button>
            </div>
            
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>Icon</th>
                            <th>Nama</th>
                            <th>Kode</th>
                            <th>Kategori</th>
                            <th>Kondisi</th>
                            <th>Opsi Harga</th>
                            <th>Lokasi</th>
                            <th>Status</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="itemsTableBody">
                        <!-- Items will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Rentals Section -->
        <div id="rentalsSection" class="section" style="display: none;">
            <div class="section-header">
                <h2>Manajemen Penyewaan</h2>
                <button class="btn-primary" onclick="showAddRentalModal()">
                    <i class="fas fa-plus"></i>
                    Tambah Penyewaan
                </button>
            </div>
            
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Pelanggan</th>
                            <th>Telepon</th>
                            <th>Barang</th>
                            <th>Tanggal Mulai</th>
                            <th>Durasi</th>
                            <th>Total Biaya</th>
                            <th>Status</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="rentalsTableBody">
                        <!-- Rentals will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Returns Section -->
        <div id="returnsSection" class="section" style="display: none;">
            <div class="section-header">
                <h2>Manajemen Pengembalian</h2>
                <div class="section-actions">
                    <button class="btn-primary" onclick="showAddReturnModal()">
                        <i class="fas fa-plus"></i>
                        Proses Pengembalian
                    </button>
                    <button class="btn-secondary" onclick="showBarcodeScanner()">
                        <i class="fas fa-qrcode"></i>
                        Scan Barcode
                    </button>
                </div>
            </div>
            
            <div class="table-container">
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>ID Sewa</th>
                            <th>Pelanggan</th>
                            <th>Barang</th>
                            <th>Tanggal Kembali</th>
                            <th>Kondisi</th>
                            <th>Diskon</th>
                            <th>Biaya Final</th>
                            <th>Aksi</th>
                        </tr>
                    </thead>
                    <tbody id="returnsTableBody">
                        <!-- Returns will be populated here -->
                    </tbody>
                </table>
            </div>
        </div>

        <!-- Reports Section -->
        <div id="reportsSection" class="section" style="display: none;">
            <div class="section-header">
                <h2>Laporan</h2>
            </div>
            
            <div class="reports-grid">
                <div class="report-card">
                    <h3>Grafik Pendapatan</h3>
                    <canvas id="revenueChart" width="400" height="200"></canvas>
                </div>
                
                <div class="report-card">
                    <h3>Status Penyewaan</h3>
                    <canvas id="rentalChart" width="400" height="200"></canvas>
                </div>
            </div>
        </div>
    </div>

    <!-- Add Category Modal -->
    <div id="addCategoryModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Tambah Kategori Baru</h3>
                <span class="close" onclick="closeModal('addCategoryModal')">&times;</span>
            </div>
            <form id="addCategoryForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="categoryName">Nama Kategori</label>
                        <input type="text" id="categoryName" required>
                    </div>
                    <div class="form-group">
                        <label for="categoryIcon">Icon</label>
                        <select id="categoryIcon" required>
                            <option value="">Pilih Icon</option>
                            <option value="💻">💻 Elektronik</option>
                            <option value="🪑">🪑 Furniture</option>
                            <option value="🔧">🔧 Alat</option>
                            <option value="🚗">🚗 Kendaraan</option>
                            <option value="📷">📷 Kamera</option>
                            <option value="🎵">🎵 Audio</option>
                            <option value="🏠">🏠 Rumah Tangga</option>
                            <option value="⚽">⚽ Olahraga</option>
                        </select>
                    </div>
                </div>
                <div class="form-group">
                    <label for="categoryDescription">Deskripsi</label>
                    <textarea id="categoryDescription" rows="3"></textarea>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('addCategoryModal')">Batal</button>
                    <button type="submit" class="btn-primary">Simpan</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Item Modal -->
    <div id="addItemModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Tambah Barang Baru</h3>
                <span class="close" onclick="closeModal('addItemModal')">&times;</span>
            </div>
            <form id="addItemForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="itemName">Nama Barang</label>
                        <input type="text" id="itemName" required>
                    </div>
                    <div class="form-group">
                        <label for="itemCode">Kode Barang</label>
                        <input type="text" id="itemCode" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="itemCategory">Kategori</label>
                        <select id="itemCategory" required>
                            <option value="">Pilih Kategori</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="itemCondition">Kondisi</label>
                        <select id="itemCondition" required>
                            <option value="">Pilih Kondisi</option>
                            <option value="Baru">Baru</option>
                            <option value="Baik">Baik</option>
                            <option value="Cukup">Cukup</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                    </div>
                    <div class="form-group">
                        <label for="itemLocation">Lokasi</label>
                        <input type="text" id="itemLocation" required>
                    </div>
                </div>
                
                <!-- Pricing Options Section -->
                <div class="pricing-section">
                    <h4>Opsi Harga Sewa</h4>
                    <div id="pricingOptions">
                        <div class="pricing-option">
                            <div class="form-row">
                                <div class="form-group">
                                    <label>Jenis Sewa</label>
                                    <select class="pricing-type">
                                        <option value="hourly">Per Jam</option>
                                        <option value="daily" selected>Per Hari</option>
                                        <option value="weekly">Per Minggu</option>
                                        <option value="monthly">Per Bulan</option>
                                        <option value="custom">Custom</option>
                                    </select>
                                </div>
                                <div class="form-group">
                                    <label>Nama Custom (jika custom)</label>
                                    <input type="text" class="pricing-custom-name" placeholder="Contoh: Per Event">
                                </div>
                                <div class="form-group">
                                    <label>Harga</label>
                                    <input type="number" class="pricing-price" required>
                                </div>
                                <div class="form-group">
                                    <button type="button" class="btn-remove" onclick="removePricingOption(this)">
                                        <i class="fas fa-trash"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <button type="button" class="btn-secondary" onclick="addPricingOption()">
                        <i class="fas fa-plus"></i>
                        Tambah Opsi Harga
                    </button>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('addItemModal')">Batal</button>
                    <button type="submit" class="btn-primary">Simpan</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Rental Modal -->
    <div id="addRentalModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Tambah Penyewaan Baru</h3>
                <span class="close" onclick="closeModal('addRentalModal')">&times;</span>
            </div>
            <form id="addRentalForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="customerName">Nama Pelanggan</label>
                        <input type="text" id="customerName" required>
                    </div>
                    <div class="form-group">
                        <label for="customerPhone">Telepon</label>
                        <input type="tel" id="customerPhone" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="rentalItem">Pilih Barang</label>
                        <select id="rentalItem" required>
                            <option value="">Pilih Barang</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="pricingOption">Opsi Harga</label>
                        <select id="pricingOption" required>
                            <option value="">Pilih Opsi Harga</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="startDate">Tanggal Mulai</label>
                        <input type="date" id="startDate" required>
                    </div>
                    <div class="form-group">
                        <label for="duration">Durasi</label>
                        <input type="number" id="duration" min="1" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="totalCost">Total Biaya (Rp)</label>
                    <div class="form-group">
                        <label for="manualPrice">Harga Manual (Opsional)</label>
                        <input type="number" id="manualPrice" placeholder="Kosongkan jika menggunakan harga otomatis" oninput="calculateRentalCost()">
                    </div>
                        <input type="number" id="totalCost" readonly>
                    </div>
                    <div class="form-group">
                        <label for="customPrice">Harga Manual (Opsional)</label>
                        <input type="number" id="customPrice" placeholder="Kosongkan untuk harga otomatis">
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('addRentalModal')">Batal</button>
                    <button type="submit" class="btn-primary">Simpan & Buat Invoice</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Add Return Modal -->
    <div id="addReturnModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Proses Pengembalian</h3>
                <span class="close" onclick="closeModal('addReturnModal')">&times;</span>
            </div>
            <form id="addReturnForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="returnRental">Pilih Penyewaan Aktif</label>
                        <select id="returnRental" required>
                            <option value="">Pilih Penyewaan</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="returnDate">Tanggal Kembali</label>
                        <input type="date" id="returnDate" required>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="returnCondition">Kondisi Barang</label>
                        <select id="returnCondition" required>
                            <option value="">Pilih Kondisi</option>
                            <option value="Baik">Baik</option>
                            <option value="Rusak Ringan">Rusak Ringan</option>
                            <option value="Rusak Berat">Rusak Berat</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="discount">Diskon (%)</label>
                    <div class="form-group">
                        <label for="returnPenalty">Denda Manual (Rp)</label>
                        <input type="number" id="returnPenalty" value="0" oninput="calculateFinalCost()">
                    </div>
                    <div class="form-group">
                        <label for="penaltyReason">Alasan Denda</label>
                        <textarea id="penaltyReason" placeholder="Masukkan alasan jika ada denda"></textarea>
                    </div>
                        <input type="number" id="discount" min="0" max="100" value="0">
                    </div>
                </div>
                <div class="form-group">
                    <label for="finalCost">Biaya Final (Rp)</label>
                    <input type="number" id="finalCost" readonly>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn-secondary" onclick="closeModal('addReturnModal')">Batal</button>
                    <button type="submit" class="btn-primary">Proses</button>
                </div>
            </form>
        </div>
    </div>

    <!-- Barcode Scanner Modal -->
    <div id="barcodeScannerModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Scan Barcode untuk Pengembalian</h3>
                <span class="close" onclick="closeModal('barcodeScannerModal')">&times;</span>
            </div>
            <div class="scanner-container">
                <div class="scanner-area">
                    <i class="fas fa-qrcode scanner-icon"></i>
                    <p>Arahkan kamera ke barcode barang</p>
                    <input type="text" id="barcodeInput" placeholder="Atau ketik kode barcode manual" class="barcode-input">
                    <button type="button" class="btn-primary" onclick="processBarcodeReturn()">
                        <i class="fas fa-search"></i>
                        Cari Penyewaan
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Invoice Modal -->
    <div id="invoiceModal" class="modal">
        <div class="modal-content invoice-modal">
            <div class="modal-header">
                <h3>Invoice Penyewaan</h3>
                <span class="close" onclick="closeModal('invoiceModal')">&times;</span>
            </div>
            <div id="invoiceContent" class="invoice-content">
                <!-- Invoice content will be generated here -->
            </div>
            <div class="form-actions">
                <button type="button" class="btn-secondary" onclick="printInvoice()">
                    <i class="fas fa-print"></i>
                    Print
                </button>
                <button type="button" class="btn-primary" onclick="downloadInvoice()">
                    <i class="fas fa-download"></i>
                    Download PDF
                </button>
            </div>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
